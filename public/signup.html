<!doctype html>
<html lang="ko">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>회원가입</title><link rel="stylesheet" href="style.css" /></head>
<body>
  <div class="header">🆕 WhisperBox - 회원가입</div>
  <div class="container">
    <div class="card">
      <input id="username" placeholder="아이디 (영문/숫자)" />
      <input id="nickname" placeholder="닉네임 (게시글에 표시됨)" />
      <input id="password" type="password" placeholder="비밀번호" />
      <div class="row">
        <button id="signupBtn">회원가입</button>
        <button onclick="location.href='login.html'">로그인</button>
      </div>
      <div style="margin-top:8px"><a href="index.html">목록으로</a></div>
    </div>
  </div>

<script src="script.js"></script>
<script>
document.getElementById("signupBtn").addEventListener("click", async ()=>{
  const username = document.getElementById("username").value.trim();
  const nickname = document.getElementById("nickname").value.trim();
  const password = document.getElementById("password").value.trim();
  if(!username || !nickname || !password) return alert("모든 항목 입력");
  const res = await fetch("/api/signup", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ username, password, nickname })
  });
  const data = await res.json();
  if(data?.success || data?.message) {
    alert("회원가입 완료! 로그인 해주세요.");
    location.href = "login.html";
  } else alert(data?.error || "가입 실패");
});
</script>
</body>
</html>
